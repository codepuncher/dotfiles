#!/usr/bin/env bash

section_start() {
	printf '%*s\n' "${COLUMNS:-$(tput cols)}" '' | tr ' ' -
	echo "${1}"
}

reinstall_dotfiles() {
	rm -rf ~/.{local/bin,npm,nvm,zinit,go/bin}
	cd ~/.dotfiles && ./setup.sh
}

install_arch_packages() {
	echo 'Enabling the AUR...'
	sudo sed -Ei '/EnableAUR/s/^#//' /etc/pamac.conf

	PACKAGES=(
		# General
		redshift
		ulauncher
		variety
		bitwarden
		plank
		spotify-launcher
		spotifyd

		# Social
		discord
		caprine
		whatscli-git
		whatsapp-for-linux

		# Work
		teams
		microsoft-edge-stable-bin

		# Terminal/shell
		alacritty
		tmux

		# Languages
		go

		# Fonts
		nerd-fonts-anonymous-pro
		nerd-fonts-dejavu-complete
		nerd-fonts-fira-code
		nerd-fonts-go-mono
		nerd-fonts-hack
		nerd-fonts-jetbrains-mono
		nerd-fonts-liberation-mono
		nerd-fonts-source-code-pro
		nerd-fonts-terminus

		# IDE
		neovim-nightly-bin
		lua-language-server
		shellcheck

		# System
		tldr
		git
		github-cli
		jq
		ripgrep
		exa
		fd
		git-delta
	)

	# shellcheck disable=2046
	sudo pamac install --no-confirm --no-upgrade $(
		IFS=' '
		echo "${PACKAGES[*]}"
	)
}

install_node_packages() {
	PACKAGES=(
		bash-language-server
		intelephense
	)

	# shellcheck disable=2046
	yarn global add $(
		IFS=' '
		echo "${PACKAGES[*]}"
	)
}

install_go_packages() {
	PACKAGES=(
		mvdan.cc/sh/v3/cmd/shfmt@latest
	)

	# shellcheck disable=2046
	go install $(
		IFS=' '
		echo "${PACKAGES[*]}"
	)
}
